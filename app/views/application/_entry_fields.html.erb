<%= render 'shared/error_messages', :object => f.object %>
<%= field_set_tag "Teilnahmeorte und Kategorie" do %>
  <div class="field">
    <%= f.label :competition_id %>
    <% if Competition.current.count > 1 %>
      <%= collection_select(:entry, :competition_id, Competition.current,
          :id, :name, {:include_blank => 'Bitte wählen'}) %>
    <% else %>
      <%= collection_select(:entry, :competition_id, Competition.current,
          :id, :name, {:selected => Competition.current.first.id}) %>
    <% end %>
  </div>
  <div class="field">
    <%= f.label :category_id %>
    <%= collection_select(:entry, :category_id, Category.current,
        :id, :name, {:include_blank => 'Bitte wählen'}) %>
  </div>
  <% if JUMU_ROUND == 2 %>
    <div class="field">
      <%= f.label :first_competition_id, :title => "Regionalwettbewerb" %>
      <%= collection_select(:entry, :first_competition_id, Competition.preceding,
          :id, :host_name, {:include_blank => 'Bitte wählen'}) %>
    </div>
  <% end %>
<% end %>
<%= field_set_tag "Wer nimmt an diesem Vorspiel teil…" do %>
  <div id="appearances">
    <%= link_to_add_appearance "Neuen Teilnehmer hinzufügen", f %>
    <%= f.fields_for :appearances do |appearance_form| %>
      <%= render 'appearance_fields', :f => appearance_form %>
    <% end %>
  </div>
<% end %>
<%= field_set_tag "…und mit welchem Programm?" do %>
  <div id="pieces">
    <%= link_to_add_piece "Neues Stück hinzufügen", f %>
    <%= f.fields_for :pieces do |piece_form| %>
      <%= render 'piece_fields', :f => piece_form %>
    <% end %>
  </div>
<% end %>
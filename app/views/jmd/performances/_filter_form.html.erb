<%= form_tag path, method: :get, class: "filter-form form-search well" do %>

  <% unless @competition.nil? %>
    <%= select nil, :on_date, @competition.days.collect { |day| [l(day, format: :long), day.to_s] },
          { selected: params[:on_date], include_blank: "Alle Tage" }, class: "span2" %>
  <% end %>

  <%= select nil, :in_category, Category.current.collect { |c| [c.name, c.id] },
      { selected: params[:in_category], include_blank: "Alle Kategorien" } %>

  <% if @competition.nil? %>
    <% if JUMU_ROUND == 1 %>
      <%= select nil, :in_competition,
            Competition.accessible_by(current_ability).current.collect { |c| [c.name, c.id] },
            { selected: params[:in_competition], include_blank: "Alle Wettbewerbe" } %>
    <% else %>
      <%= select nil, :advanced_from_competition,
            Competition.accessible_by(current_ability).preceding.collect { |c| [c.name, c.id] },
            { selected: params[:advanced_from_competition], include_blank: "Alle RW" } %>
    <% end %>
  <% elsif @competition.round.level == 2 %>
    <%= select nil, :advanced_from_competition,
          Competition.accessible_by(current_ability).seasonal_with_level(1).collect { |c| [c.name, c.id] },
          { selected: params[:advanced_from_competition], include_blank: "Alle RW" } %>
  <% end %>

  <%= select nil, :in_age_group, JUMU_AGE_GROUPS,
      { selected: params[:in_age_group], include_blank: "Alle AG" }, class: "span2" %>

  <br />

  <%= submit_tag "Filtern", class: (filter_active? ? "btn btn-warning" : "btn") %>
  <%= link_to "Alle anzeigen", path, class: "btn" %>
<% end %>

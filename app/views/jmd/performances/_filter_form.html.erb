<%= form_tag path, method: :get, class: "filter-form form-search well" do %>

  <% unless @competition.nil? %>
    <%= select nil, :on_date, @competition.days.collect { |day| [l(day, format: :long), day.to_s] },
          { selected: params[:on_date], include_blank: "Alle Tage" }, class: "span2" %>
    <%= select nil, :at_stage_venue, @competition.venues.collect { |v| [v.name, v.id] },
          { selected: params[:at_stage_venue], include_blank: "Alle VorspielrÃ¤ume" } %>
  <% end %>

  <%= select nil, :in_genre, [["Klassik", 0], ["Pop", 1]],
      { selected: params[:in_genre], include_blank: "Klassik & Pop" } %>

  <% if @competition.nil? # Looking at performances across competitions %>
    <% if JUMU_ROUND == 1 %>
      <%= select nil, :in_competition,
            Competition.accessible_by(current_ability).current.collect { |c| [c.name, c.id] },
            { selected: params[:in_competition], include_blank: "Alle Wettbewerbe" } %>
    <% else %>
      <%= select nil, :advanced_from_competition,
            Competition.accessible_by(current_ability).preceding.collect { |c| [c.name, c.id] },
            { selected: params[:advanced_from_competition], include_blank: "Alle Regionalwettbewerbe" },
            class: "span3" %>
    <% end %>
  <% elsif @competition.round.level == 2 %>
    <%= select nil, :advanced_from_competition,
          @competition.possible_predecessors.collect { |c| [c.name, c.id] },
          { selected: params[:advanced_from_competition], include_blank: "Alle Regionalwettbewerbe" },
          class: "span3" %>
  <% end %>

  <%= select nil, :in_category, Category.current.collect { |c| [c.name, c.id] },
      { selected: params[:in_category], include_blank: "Alle Kategorien" } %>

  <%= select nil, :in_age_group, JUMU_AGE_GROUPS,
      { selected: params[:in_age_group], include_blank: "Alle AG" }, class: "span2" %>
  <br>
  <%= submit_tag "Filtern", class: (filter_active? ? "btn btn-warning" : "btn") %>
  <%= link_to "Alle anzeigen", path, class: "btn" %>
<% end %>
